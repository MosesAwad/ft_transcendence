<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Checking Auth...</title>
		<script src="utils.js"></script>
		<script>
			(async () => {
				try {
					const res = await fetchWithAutoRefresh(
						"http://localhost:3000/api/v1/users/showUser",
						{
							credentials: "include",
						}
					);

					if (res.ok) {
						window.location.href = "dashboard.html";
					} else {
						window.location.href = "login.html";
					}
				} catch (err) {
					window.location.href = "login.html";
				}
			})();
		</script>
	</head>
	<body>
		Redirecting...
	</body>
</html>
